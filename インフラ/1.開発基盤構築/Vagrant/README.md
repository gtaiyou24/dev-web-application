# Vagrantまとめ
## Vagrantとは?
> Vagrantは、仮想環境のサンドボックス内に完全な開発環境を構築するためのツール

Vagrantはコマンド一つで次の作業を行ってくれる。

 - 使いたいOSシステムが動作する仮想マシンの生成
 - その仮想マシンの物理的な属性の変更(RAMの量やCPU数,etc)
 - ネットワークインターフェースを立ち上げ、自分のコンピュータや同一ネットワーク上の他デバイス、さらに他の仮想マシンからその仮想マシンにアクセスできるようにする
 - 仮想マシンのホスト名を設定する。ホスト名が適切に設定されていることを必要とするソフトウェアは数多いので、この処理が必要となる
 - シェルスクリプトや,ChefやAnsibleといった設定管理ソリューションによって仮想マシン上にソフトウェアをプロビジョニングする
 - ...

Vagrantが仮想マシンのセットアップを終えると、完全にサンドボックス化された、すべてのプロビジョニングが完了している開発環境が手に入ります。共有フォルダとネットワークのおかげで、ユーザは好きなエディタを使い続けることができ、いつものブラウザを使ってアプリケーションの開発とテストを行うことができるます。しかし、コードそのものが実行されるのは、仮想マシン上なのです。

## Vagrantを使う理由
今日、Webアプリケーションは多くの部品から構成され、下位層の技術の選択肢も多彩になっている。PHPとMySQLだけでできていたWebアプリケーションの時代とは比較にならないほど複雑になっている(Python,Ruby,JS,PostgreSQL,Redis,Riak,Nginx,Unicorn,Solr,Elasticsearch,...)。

これらの技術の様々な組み合わせは、急激に手に負えなくなってしまう可能性があり、すべてが適切に設定され、ローカルにインストールされている状態に保つ作業は、地獄。

Vagrantは、これらの問題すべてに対する現代的なソリューションです。

 - シェルスクリプトや設定管理ソフトウェアを使って、開発環境のセットアップを自動化する(ことを推奨します)
 - 物理的な開発マシンで動作させているのがLinux,Mac OS X,Windowsのいずれであっても、実働環境を動作させるのと同じオペレーションシステムで作業できるようになる
 - Vagrantは開発環境を仮想マシンに置くので、複数のプロジェクトの扱いも、それぞれのプロジェクトがそれぞれの仮想マシンに置かれることになり、容易になる
 - 仮想マシンのイメージを共有できるようになることから、チームでの作業もこれまでよりも容易になる。そして、新しいチームメンバーの立ち上げは、コマンド1つで自分用のVagrantマシンを構築してもらうように頼むだけでよくなるのです。

## Vagrant道
実際の作業環境におけるVagrantの高レベルのワークフローを理解しておくことは、非常に重要です。

 - **開発者**: 開発者はバージョン管理システムからリポジトリをチェックアウトして、`vagrant up`を実行すれば、一切手作業することなく、完全に動作する開発環境が手に入ります。自分のマシン上で、自分が使い慣れたいつものエディタやブラウザやその他のツールを使い続けることができるのです。
 - **システム運用の技術者**: システムの自動化スクリプトの作業を行います。ここでもやはり彼らは好きなエディタやその他のツールを自分のマシン上で使います。自分の書いたスクリプトをテストできる段階まで来れば、`vagrant up`とするだけで、実働環境と一致する完全なサンドボックスを手にして、実際的なシナリオとシステムの自動化のテストをする準備が整います。

システム運用技術者が開発した自動化処理は、実働環境だけでなく、開発環境でも使われます。`vagrant up`とする度に、実働環境をセットアップするのに使われるのと同じスクリプトによって、開発者は完全にプロビジョニングされた開発環境を手にすることができます。こうすれば、可能な限り実働環境に近い環境で、開発者は作業することができます。


[Docker(コンテナ)との違い](http://acchi-muite-hoi.hatenablog.com/entry/2016/05/30/041618)

---
## 準備

 - VirtualBox/VMWare/Amazon EC2インスタンスのいずれかをインストール
 - Vagrantのインストール

本ドキュメントでは、VirtualBoxがインストールされていると想定する。

## Vagrantのインストール
Vagrantの公式ページの[ダウンロードページ](https://www.vagrantup.com/downloads.html)にアクセスして使っている環境に合うインストーラーを選択する。そしたら、インストーラーが自動的に`vagrant`コマンドのパスを通してくれる。

## 参考資料

 - [Vagrant 公式ページ](https://www.vagrantup.com/intro/index.html)
 - [Vagrant入門から実践まで](https://qiita.com/daichi87gi/items/d5da33c76295ee32a735)
 - [Vagrantの使い方](https://qiita.com/skinoshita/items/57ac059ff8b1008f5e1d)
 - [GitHub - tmknom/study-vagrant: Vagrant超入門](https://github.com/tmknom/study-vagrant)
